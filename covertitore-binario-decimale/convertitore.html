<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">    
    <style type="text/css">
        body {background-color: #f5f5f5;}
        .verde{color: green;}
        .viola{color: purple;}
        .blu{color: blue;}
        .rosso{color: darkred;}
    </style>
</head>

<body>
    <div class="container">
        <form name="convertitore">
            <div class="mb-3 row">
                <label for="esa" class="col-sm-2 col-form-label">Valore <span class="verde">ESADECIMALE</span></label>
                <div class="col-sm-5">
                    <input type="text" id="esa" placeholder="cifre comprese tra 0 e F"  class="form-control"> </div>
            </div>            
            <div class="mb-3 row">
                <label for="dec" class="col-sm-2 col-form-label">Valore <span class="viola">DECIMALE</span></label>
                <div class="col-sm-5"><input type="text" id="dec" placeholder="cifre comprese tra 0 e 9"  class="form-control"></div>                
                
            </div>
            <div class="mb-3 row">
                <label for="oct" class="col-sm-2 col-form-label">Valore <span class="blu">OTTALE</span></label>
                <div class="col-sm-5"><input type="text" id="oct" placeholder="cifre comprese tra 0 e 7"  class="form-control"></div>
                
            </div>
            <div class="mb-3 row">
                <label for="bin" class="col-sm-2 col-form-label">Valore <span class="rosso">BINARIO</span></label>
                <div class="col-sm-5"><input type="text" id="bin" placeholder="cifre 1 e 0"  class="form-control"></div>
                
            </div>                        
          
            <div class="mb-3 row gap-2 col-3 mx-auto">
                <button type="button" id="converti" class="btn btn-primary">Converti</button>
                <button type="reset" class="btn btn-secondary">Cancella</button>                
            </div>
       

        </form>
    </div>

    <br><br>
</body>

<script>
    const esadecimale = document.querySelector("#esa");
    const decimale = document.querySelector("#dec");
    const ottale = document.querySelector("#oct");
    const binario = document.querySelector("#bin");
    const converti = document.querySelector("#converti");

    esadecimale.addEventListener("change", dec2esa, true);
    decimale.addEventListener("change", dec2dec, true);
    ottale.addEventListener("change", dec2oct, true);
    binario.addEventListener("change", dec2bin, true);    
    converti.addEventListener("click", convertiTutto,true);
    

    function convertiTutto()
    {}

    
    var v_esa="";
    var v_oct="";
    var v_dec=0;
    var v_bin="";
    var ii=0;
    var rr=0;
    var tt=0;
    const hd= new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");
    
    function updall(qq)
    {
        v_esa="";
        for(let tt= qq; tt>0; tt=tt)
        {
            rr=Math.floor(tt/16);
            ii=tt-16*rr;
            v_esa=hd[ii]+""+v_esa;
            tt=rr;
        };
        v_dec=qq;

        v_oct="";
        for(let tt=qq;tt>0;tt=tt)
        {
            rr=Math.floor(tt/8);
            ii=tt-8*rr;
            v_oct=ii+""+v_oct;
            tt=rr;
        };
        
        v_bin="";

        for(let tt=qq;tt>0;tt=tt)
        {
            rr=Math.floor(tt/2);
            ii=tt-2*rr;
            v_bin=ii+""+v_bin;
            tt=rr;
        };
        
        esadecimale.value=v_esa;
        decimale.value=v_dec;
        ottale.value=v_oct;
        binario.value=v_bin;
    }
    
    function dec2dec(dd)
    {
        v_dec=decimale.value;
        updall(v_dec);
    }
    
    function dec2esa(dd)
    {
        v_esa= esadecimale.value;
        v_esa=v_esa.toUpperCase();
        v_dec=0;
        for( let tt=0;tt<v_esa.length;tt++)
        {
            rr=v_esa.charAt(tt);
    
    
            if (isNaN(rr))
            {
                if (rr=="F")
                {
                    ii=15;
                }
    
                if (rr=="E")
                {
                    ii=14;
                }
    
                if (rr=="D")
                {
                    ii=13;
                }
    
                if (rr=="C")
                {
                    ii=12;
                }
    
                if (rr=="B")
                {
                    ii=11;
                }
    
                if (rr=="A")
                {
                    ii=10;
                }
            }
            else
            {
                ii=Math.floor(rr);
            }
    
            v_dec=16*v_dec+ii;
        };
        updall(v_dec);
    }
    
    function dec2oct(dd)
    {
        v_oct= ottale.value;
        v_dec=0;
        for(tt=0;tt<v_oct.length;tt++)
        {
            rr=v_oct.charAt(tt);
            ii=Math.floor(rr);
            v_dec=8*v_dec+ii;
        };
        updall(v_dec);
    }
    
    function dec2bin(dd)
    {
        v_bin= binario.value;
        v_dec=0;
        for(tt=0;tt<v_bin.length;tt++)
        {
            rr=v_bin.charAt(tt);
            ii=Math.floor(rr);
            v_dec=2*v_dec+ii;
        };
        updall(v_dec);
    }
    </script>
